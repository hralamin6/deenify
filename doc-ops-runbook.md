# অপারেশনস রানবুক — Deenify (ডেপ্লয়মেন্ট, কিউ, ব্যাকআপ, মনিটরিং)

এই রানবুকটি Deenify প্রজেক্টের অপারেশনস/ডেভঅপস ব্যবস্থাপনার জন্য। এখানে ডেপ্লয়মেন্ট, এনভায়রনমেন্ট সেটআপ, কিউ ও সিডিউলার, ব্যাকআপ, মনিটরিং, লগিং, এবং ইন্সিডেন্ট রেসপন্স বিস্তারিতভাবে উল্লেখ করা হলো।

---

## ১) পরিবেশ (Environment) প্রস্তুতি
### ১.১ সার্ভার প্রয়োজনীয়তা
- PHP (Laravel 12 compatible)
- Composer
- Node.js + npm
- Database (MySQL/MariaDB/PostgreSQL)
- Redis/Queue backend (ঐচ্ছিক কিন্তু সুপারিশকৃত)

### ১.২ প্রাথমিক সেটআপ
প্রজেক্ট রুটে:
- `composer run setup`
  - ডিপেন্ডেন্সি ইন্সটল
  - `.env` কপি
  - অ্যাপ কী জেনারেট
  - মাইগ্রেশন
  - অ্যাসেট বিল্ড

---

## ২) ডেপ্লয়মেন্ট গাইড
### ২.১ বেসিক ডেপ্লয়মেন্ট ধাপ
1. কোড আপডেট (git pull)
2. কম্পোজার ইনস্টল: `composer install --no-dev --optimize-autoloader`
3. মাইগ্রেশন: `php artisan migrate --force`
4. ক্যাশ রিফ্রেশ:
   - `php artisan config:cache`
   - `php artisan route:cache`
   - `php artisan view:cache`
5. অ্যাসেট বিল্ড: `npm run build`
6. কিউ/সিডিউলার রিস্টার্ট (যদি প্রয়োজন)

### ২.২ ডাউনটাইম কমানোর টিপস
- ব্লু-গ্রিন বা রোলিং ডেপ্লয়মেন্ট ব্যবহার করুন
- বড় মাইগ্রেশনের আগে ব্যাকআপ নিন

---

## ৩) কিউ (Queues)
### ৩.১ কিউ ব্যবহারের কারণ
- ইমেইল নোটিফিকেশন
- পুশ নোটিফিকেশন
- ব্যাকগ্রাউন্ড প্রসেসিং (রিপোর্ট, ব্যাকআপ)

### ৩.২ কিউ চালু করা
- `.env` এ `QUEUE_CONNECTION` সেট করুন (উদাহরণ: database, redis)
- Worker চালান:
  - `php artisan queue:work`

### ৩.৩ কিউ মনিটরিং
- লম্বা কিউ বা ব্যর্থ জব (failed jobs) নিয়মিত চেক করুন
- প্রয়োজন হলে `php artisan queue:restart`

---

## ৪) সিডিউলার (Task Scheduler)
### ৪.১ সিডিউলার চালু
ক্রন জব সেট করুন:
```
* * * * * cd /path/to/project && php artisan schedule:run >> /dev/null 2>&1
```

### ৪.২ সিডিউলার কাজ
- ব্যাকআপ জব
- নোটিফিকেশন রিমাইন্ডার
- ক্লিনআপ/মেইনটেনেন্স টাস্ক

---

## ৫) ব্যাকআপ (Backups)
### ৫.১ ব্যাকআপ টাইপ
- Database only
- Files only
- Database + Files

### ৫.২ ব্যাকআপ কমান্ড (যদি কনফিগার করা থাকে)
- `php artisan backup:run` বা কাস্টম কমান্ড

### ৫.৩ ব্যাকআপ রিটেনশন
- পুরনো ব্যাকআপ নিয়মিত ক্লিন করুন
- স্টোরেজ স্পেস মনিটর করুন

---

## ৬) লগিং ও মনিটরিং
### ৬.১ লগ ফাইল
- Laravel লগ: `storage/logs/laravel.log`

### ৬.২ মনিটরিং কী দেখা উচিত
- Error spike
- Payment gateway failures
- Queue backlog
- Server CPU/RAM

### ৬.৩ অ্যালার্ট সেটআপ
- গুরুত্বপূর্ণ error ঘটলে ইমেইল/স্ল্যাক নোটিফিকেশন
- ব্যাকআপ failure নোটিফিকেশন

---

## ৭) নিরাপত্তা (Security Ops)
- `.env` গোপন রাখুন
- নিয়মিত পাসওয়ার্ড রোটেশন
- HTTPS বাধ্যতামূলক
- অ্যাডমিন লগ মনিটর করুন
- Fail2ban/Firewall কনফিগারেশন ব্যবহার করুন

---

## ৮) ইন্সিডেন্ট রেসপন্স
### ৮.১ সাধারণ ইস্যু
- **পেমেন্ট স্ট্যাটাস আপডেট হচ্ছে না**: PaymentAttempt টেবিল ও গেটওয়ে লগ যাচাই করুন
- **রিসিপ্ট জেনারেট হচ্ছে না**: DonationReceipt টেবিল ও PDF সার্ভিস চেক করুন
- **পেজ লোড স্লো**: ক্যাশ পরিষ্কার করুন ও কিউ স্ট্যাটাস দেখুন

### ৮.২ ইন্সিডেন্ট লেভেল
- **Low:** ছোট UI/লগ ইস্যু
- **Medium:** কিছু ফিচার ধীর
- **High:** ডোনেশন/পেমেন্ট ব্যর্থ

---

## ৯) মেইনটেনেন্স টিপস
- ডাটাবেস ইনডেক্স নিয়মিত রিভিউ করুন
- মিডিয়া ফাইলের স্টোরেজ পরিষ্কার করুন
- অপ্রয়োজনীয় লগ ফাইল আর্কাইভ করুন

---

## ১০) রিকভারি প্ল্যান
- সাম্প্রতিক ব্যাকআপ থেকে রিস্টোর
- কনফিগ রিভিউ
- ডেপ্লয়মেন্ট রোলব্যাক

---

## ১১) যোগাযোগ ও এসকেলেশন
- টেকনিক্যাল ইস্যু হলে সুপার অ্যাডমিনকে জানান
- পেমেন্ট সংক্রান্ত সমস্যা হলে গেটওয়ে সাপোর্টে যোগাযোগ

---

এই রানবুকটি আপনার অপারেশনস টিমকে দ্রুত ও নিরাপদভাবে Deenify পরিচালনা করতে সহায়তা করবে। প্রোডাকশন পরিবর্তনের আগে সবসময় ব্যাকআপ এবং টেস্টিং নিশ্চিত করুন।
